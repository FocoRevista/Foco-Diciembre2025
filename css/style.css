/* === RESET & BASE === */
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

html, body { height: 100%; width: 100%; overflow: hidden; }

body {
  font-family: 'Inter', sans-serif;
  background: radial-gradient(circle at center, #2b2b2b 0%, #111 100%); /* Fondo muy oscuro premium */
  color: #fff;
  display: flex;
  flex-direction: column;
}

/* === LAYOUT === */
.app {
  width: 100%; height: 100%;
  display: flex; flex-direction: column;
  position: relative;
}

.topbar {
  padding: 10px 20px;
  display: flex; justify-content: space-between; align-items: center;
  z-index: 100; background: rgba(0,0,0,0.2);
}
.brand { font-weight: 700; letter-spacing: 1px; }
.icon-btn {
  background: transparent; border: none; color: #fff; cursor: pointer; padding: 8px;
}

.bottom-bar {
  text-align: center; padding: 10px; font-size: 0.85rem; color: #888;
  background: rgba(0,0,0,0.2); z-index: 100;
}

/* === CONTENEDOR DEL LIBRO === */
.book-container {
  flex-grow: 1;
  position: relative;
  display: flex; align-items: center; justify-content: center;
  overflow: hidden;
  perspective: 2500px; /* Clave para el efecto 3D profundo */
  padding: 20px;
}

.book {
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.4s ease; /* Zoom suave */
  display: flex;
  box-shadow: 0 20px 50px rgba(0,0,0,0.6); /* Sombra general del libro */
}

/* === PÁGINAS === */
.page-wrapper {
  position: relative;
  height: 100%;
  background-color: transparent; /* Evita bordes blancos */
  overflow: hidden;
}

.page-wrapper img {
  width: 100%; height: 100%;
  display: block;
  /* CLAVE: Contain respeta la proporción, no estira */
  object-fit: contain; 
  background-color: #fff; /* Fondo de la hoja de papel */
}

/* Sombra interna (lomo) */
.shadow-spine {
  position: absolute; top: 0; bottom: 0; width: 40px; pointer-events: none; z-index: 10;
}
.left-page .shadow-spine { right: 0; background: linear-gradient(to right, transparent, rgba(0,0,0,0.25)); }
.right-page .shadow-spine { left: 0; background: linear-gradient(to left, transparent, rgba(0,0,0,0.25)); }

/* === CONTROLES DE NAVEGACIÓN === */
.nav-arrows {
  position: absolute; width: 100%; top: 50%; transform: translateY(-50%);
  display: flex; justify-content: space-between; pointer-events: none; padding: 0 20px; z-index: 200;
}
.nav-btn {
  pointer-events: all;
  background: rgba(255,255,255,0.15); backdrop-filter: blur(4px);
  border: none; color: white; border-radius: 50%;
  width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: 0.2s;
}
.nav-btn:hover { background: rgba(255,255,255,0.3); transform: scale(1.1); }
.nav-btn:disabled { opacity: 0; pointer-events: none; }


/* === MODO ESCRITORIO (> 768px) === */
@media (min-width: 769px) {
  .book {
    height: 85vh; /* Altura fija relativa a ventana */
    aspect-ratio: 1.414 / 1; /* Proporción doble carta/A4 apaisado */
  }
  .page-wrapper { width: 50%; }
  
  /* Efecto 3D Flip - Simulación */
  .turning-page {
    position: absolute; top: 0; width: 50%; height: 100%; z-index: 50;
    backface-visibility: hidden;
    transform-origin: center left; /* Gira desde el lomo */
    transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1); /* Curva de animación realista */
  }
}

/* === MODO MÓVIL (< 768px) === */
@media (max-width: 768px) {
  .book-container { padding: 0; }
  
  .book {
    width: 100vw; 
    height: auto; /* Deja que la imagen dicte la altura */
    box-shadow: none;
  }
  
  .page-wrapper { 
    width: 100%; 
    height: auto;
  }
  
  .page-wrapper img {
    object-fit: contain; /* Ajuste perfecto sin cortes */
    max-height: 80vh; /* Evita que sea demasiado larga si la pantalla es corta */
  }

  .nav-btn { width: 40px; height: 40px; background: rgba(0,0,0,0.5); }
  .shadow-spine { display: none; } /* En móvil no hay lomo */
  
  /* Fullscreen real en móvil */
  body:fullscreen .book-container { background: #000; display: flex; align-items: center; }
  body:fullscreen .book img { max-height: 100vh; width: auto; margin: 0 auto; }
}
